/**
 * @module emend
 * @version 1.1.0
 * @license MIT
 * @author Ris Adams <emend@risadams.com>
 * @copyright Copyright Â© 2021-2025 Ris Adams. All rights reserved.
 */
var emend=(()=>{var f=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var g=(e,t)=>{for(var r in t)f(e,r,{get:t[r],enumerable:!0})},v=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of x(t))!A.call(e,s)&&s!==r&&f(e,s,{get:()=>t[s],enumerable:!(i=b(t,s))||i.enumerable});return e};var C=e=>v(f({},"__esModule",{value:!0}),e);var y=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var a=(e,t,r)=>(y(e,t,"read from private field"),r?r.call(e):t.get(e)),c=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},l=(e,t,r,i)=>(y(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);var E={};g(E,{Emend:()=>m,default:()=>T});var S=e=>{let t=s=>s.split("").map(n=>n.charCodeAt(0)),r=s=>("0"+Number(s).toString(16)).substr(-2),i=s=>t(e).reduce((n,p)=>n^p,s);return s=>s.split("").map(t).map(i).map(r).join("")},D=e=>{let t=i=>i.split("").map(s=>s.charCodeAt(0)),r=i=>t(e).reduce((s,n)=>s^n,i);return i=>String(i).match(/.{1,2}/g).map(s=>parseInt(s,16)).map(r).map(s=>String.fromCharCode(s)).join("")},O={explicitPrefix:"@",salt:"",explicitOnly:!1,domRemoveDelay:1200,sendClickDelay:500},u,o,d,h,m=class{constructor(t={}){c(this,u,"1.1.0");c(this,o,void 0);c(this,d,void 0);c(this,h,void 0);l(this,o,{...O,...t})}init(t={}){return l(this,o,{...a(this,o),...t}),l(this,d,S(a(this,o).salt)),l(this,h,D(a(this,o).salt)),document.querySelectorAll("a").forEach(i=>{let s=i.getAttribute("href");if(!s||s.indexOf("mailto:")!==0)return;let n=`mailto:${a(this,o).explicitPrefix}`;s.indexOf(n)===0?(i.setAttribute("data-emended-mailto",s.replace(n,"")),i.href="#"):a(this,o).explicitOnly||this.protect(i),i.addEventListener("click",p=>{p.preventDefault(),this.sendMail(p.target)})}),this}encode(t){return a(this,d).call(this,t.replace("mailto:",""))}decode(t){return a(this,h).call(this,t)}protect(t){let r=t.getAttribute("href").replace("mailto:","");return t.setAttribute("data-emended-mailto",this.encode(r)),t.setAttribute("href","#"),t}sendMail(t){if(!t.hasAttribute("data-emended-mailto"))return;let r=`mailto:${this.decode(t.getAttribute("data-emended-mailto"))}`,i=document.createElement("a");i.style.visibility="hidden",i.style.position="absolute",i.href=r,document.body.appendChild(i),setTimeout(()=>i.click(),a(this,o).sendClickDelay),setTimeout(()=>document.body.removeChild(i),a(this,o).domRemoveDelay)}get version(){return a(this,u)}};u=new WeakMap,o=new WeakMap,d=new WeakMap,h=new WeakMap;var k=new m,T=k;return C(E);})();
//# sourceMappingURL=emend.js.map
