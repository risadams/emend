/**
 * @module emend
 * @version 1.1.0
 * @license MIT
 * @author Ris Adams <emend@risadams.com>
 * @copyright Copyright Â© 2021-2025 Ris Adams. All rights reserved.
 */
var f=(r,t,s)=>{if(!t.has(r))throw TypeError("Cannot "+s)};var a=(r,t,s)=>(f(r,t,"read from private field"),s?s.call(r):t.get(r)),c=(r,t,s)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,s)},l=(r,t,s,e)=>(f(r,t,"write to private field"),e?e.call(r,s):t.set(r,s),s);var y=r=>{let t=i=>i.split("").map(n=>n.charCodeAt(0)),s=i=>("0"+Number(i).toString(16)).substr(-2),e=i=>t(r).reduce((n,p)=>n^p,i);return i=>i.split("").map(t).map(e).map(s).join("")},b=r=>{let t=e=>e.split("").map(i=>i.charCodeAt(0)),s=e=>t(r).reduce((i,n)=>i^n,e);return e=>String(e).match(/.{1,2}/g).map(i=>parseInt(i,16)).map(s).map(i=>String.fromCharCode(i)).join("")},x={explicitPrefix:"@",salt:"",explicitOnly:!1,domRemoveDelay:1200,sendClickDelay:500},m,o,d,h,u=class{constructor(t={}){c(this,m,"1.1.0");c(this,o,void 0);c(this,d,void 0);c(this,h,void 0);l(this,o,{...x,...t})}init(t={}){return l(this,o,{...a(this,o),...t}),l(this,d,y(a(this,o).salt)),l(this,h,b(a(this,o).salt)),document.querySelectorAll("a").forEach(e=>{let i=e.getAttribute("href");if(!i||i.indexOf("mailto:")!==0)return;let n=`mailto:${a(this,o).explicitPrefix}`;i.indexOf(n)===0?(e.setAttribute("data-emended-mailto",i.replace(n,"")),e.href="#"):a(this,o).explicitOnly||this.protect(e),e.addEventListener("click",p=>{p.preventDefault(),this.sendMail(p.target)})}),this}encode(t){return a(this,d).call(this,t.replace("mailto:",""))}decode(t){return a(this,h).call(this,t)}protect(t){let s=t.getAttribute("href").replace("mailto:","");return t.setAttribute("data-emended-mailto",this.encode(s)),t.setAttribute("href","#"),t}sendMail(t){if(!t.hasAttribute("data-emended-mailto"))return;let s=`mailto:${this.decode(t.getAttribute("data-emended-mailto"))}`,e=document.createElement("a");e.style.visibility="hidden",e.style.position="absolute",e.href=s,document.body.appendChild(e),setTimeout(()=>e.click(),a(this,o).sendClickDelay),setTimeout(()=>document.body.removeChild(e),a(this,o).domRemoveDelay)}get version(){return a(this,m)}};m=new WeakMap,o=new WeakMap,d=new WeakMap,h=new WeakMap;var A=new u,v=A;export{u as Emend,v as default};
//# sourceMappingURL=emend.esm.js.map
